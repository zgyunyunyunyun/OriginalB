# 微信 + 抖音小游戏 MVP 体验落地手册（可执行版）

目标：在 1~2 天内产出“双端可体验包 + 体验结论”，先验证玩法链路，不接登录/广告业务 SDK。

适用版本：Unity `2022.3.62f2c1`

---

## 0. 执行边界（先明确）

- 本手册中的“插件”指 **小游戏导出插件/导出工具链**，用于把 Unity 项目导出到微信/抖音小游戏工程。
- 本手册 **不包含** 登录、支付、广告、分享等业务 SDK 的真实能力接入。
- 如官方插件名称或菜单路径有版本差异，以平台官方最新文档为准。

---

## 1. 环境准备（约 30 分钟）

### 1.1 必备工具

- Unity Hub + Unity Editor `2022.3.62f2c1`
- 微信开发者工具（最新版）
- 抖音开发者工具（最新版）

### 1.2 项目基线自检

在 Unity 中执行：

1. 打开场景：`Assets/Scenes/MainScene.unity`
2. 点击 Play，运行 1 分钟
3. 确认 Console `Error = 0`

通过标准：Editor 中可正常点击、拖拽、消除。

---

## 2. 导出插件接入（约 60 分钟）

> 目的：让 Unity 具备“导出微信小游戏工程 / 导出抖音小游戏工程”的能力。

### 2.1 获取插件包（两端分别处理）

从平台官方文档进入插件下载/安装页，准备以下其中一种来源：

- `Git URL`（推荐，便于升级）
- `本地 .tgz / 本地 package`
- `UnityPackage`（若官方仍提供）

### 2.2 在 Unity Package Manager 安装

路径：`Window > Package Manager`

常见安装方式：

1. 点击左上角 `+`
2. 选择：
   - `Add package from git URL...` 或
   - `Add package from disk...`
3. 分别安装微信导出插件、抖音导出插件

### 2.3 安装后验收

安装完成后，Unity 菜单中应出现对应导出入口（名称可能因插件版本不同而有差异）：

- 微信小游戏导出入口
- 抖音小游戏导出入口

未出现时先排查：

- Console 是否有编译报错
- 插件是否与 Unity 2022.3 兼容
- `Packages/manifest.json` 是否已写入插件依赖

---

## 3. 微信包构建与运行（约 60 分钟）

### 3.1 切换编译宏

路径：`Edit > Project Settings > Player > Other Settings > Scripting Define Symbols`

- 保留：`PLATFORM_WECHAT`
- 移除：`PLATFORM_DOUYIN`

### 3.2 导出微信小游戏工程

1. 通过微信导出插件菜单打开导出面板
2. 配置导出目录（建议：项目外独立目录）
3. 执行导出

### 3.3 在微信开发者工具验证

1. 打开微信开发者工具
2. 导入刚导出的工程目录
3. 编译并预览
4. 查看日志

必须看到：`PlatformContext=WeChatPlatformContext`

---

## 4. 抖音包构建与运行（约 60 分钟）

### 4.1 切换编译宏

路径同上：`Player > Scripting Define Symbols`

- 保留：`PLATFORM_DOUYIN`
- 移除：`PLATFORM_WECHAT`

### 4.2 导出抖音小游戏工程

1. 打开抖音导出插件面板
2. 配置导出目录
3. 执行导出

### 4.3 在抖音开发者工具验证

1. 打开抖音开发者工具
2. 导入导出目录
3. 编译并预览
4. 查看日志

必须看到：`PlatformContext=DouyinPlatformContext`

---

## 5. 双端 MVP 验收（约 90 分钟）

两端都跑同一套最小链路：

1. 点击箱子 -> 抬起摇摆
2. 拖拽箱子 -> 合法落位
3. 非法落位 -> 回弹
4. 三消 -> 分数变化
5. 通关 -> 奖励结算
6. 重启后积分仍在

参考清单：`Docs/小游戏真机前检查清单.md`
参考用例：`Docs/小游戏最小回归用例表.md`

---

## 6. 常见失败与立即处理

### 6.1 导出入口不存在

- 重新确认插件已安装到 Package Manager
- 检查插件版本是否支持 Unity 2022.3
- 清理编译报错后重启 Unity

### 6.2 导出成功但工具内启动失败

- 先看是否宏切错（微信包跑成 Douyin/反之）
- 检查启动日志里 `PlatformContext` 与服务注册类型
- 用最小场景验证是否为资源或初始化问题

### 6.3 可启动但不能交互

- 检查日志中 `InputService` 是否是目标平台实现
- 检查 `EventSystem` 是否创建成功

---

## 7. Day 2 收口（可选）

如果 Day 1 有阻塞项，Day 2 按以下优先级修复：

1. 崩溃/黑屏
2. 无法交互
3. 数据不持久
4. 性能明显不稳定

完成后用模板输出结论：`Docs/小游戏MVP体验报告模板.md`

---

## 8. 输出物（必须交付）

- 微信可运行工程（开发者工具可打开）
- 抖音可运行工程（开发者工具可打开）
- 双端回归勾选记录
- 一份 MVP 体验报告

---

## 关联文档

- 真机前检查清单：`Docs/小游戏真机前检查清单.md`
- 最小回归用例表：`Docs/小游戏最小回归用例表.md`
- MVP 体验报告模板：`Docs/小游戏MVP体验报告模板.md`
